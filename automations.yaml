- id: weekday_alarm
  alias: Week day alarm automation
  trigger:
  - minutes: /1
    platform: time
    seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.alarmweekon
    state: 'on'
  - condition: state
    entity_id: input_boolean.alarmweekday
    state: 'on'
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  - condition: template
    value_template: '{{ now().strftime("%H:%M") == states.sensor.alarm_time.state
      }}'
  action:
  - service: script.turn_on
    data:
      entity_id: script.wakeup
- id: weekend_alarm
  alias: Weekend alarm automation
  trigger:
  - minutes: /1
    platform: time
    seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.alarmweekon
    state: 'on'
  - condition: state
    entity_id: input_boolean.alarmweekday
    state: 'off'
  - condition: time
    weekday:
    - sat
    - sun
  - condition: template
    value_template: '{{ now().strftime("%H:%M") == states.sensor.alarm_time.state
      }}'
  action:
  - service: script.turn_on
    data:
      entity_id: script.wakeup
- id: turn_on_hyperion_in_evenings
  alias: Turn On Hyperion Service On Sunset
  trigger:
    platform: sun
    event: sunset
    offset: -00:20:00
  condition:
    condition: state
    entity_id: device_tracker.hermesmobile
    state: home
  action:
  - service: switch.turn_on
    data:
      entity_id: switch.hyperion_service
- id: media_playing_light_off
  alias: Media player playing
  trigger:
  - entity_id: media_player.kodi
    platform: state
    from: paused
    to: playing
  - entity_id: media_player.kodi
    platform: state
    from: idle
    to: playing
  condition:
  - condition: state
    entity_id: sun.sun
    state: below_horizon
  action:
  - service: scene.turn_on
    data:
      entity_id: scene.room_dim
- id: loreta_start_playing_turn_on_socket
  alias: Loreta is playing
  trigger:
  - entity_id: media_player.kodi_2
    from: paused
    platform: state
    to: playing
  - entity_id: media_player.kodi_2
    from: idle
    platform: state
    to: playing
  - entity_id: media_player.kodi_2
    from: 'off'
    platform: state
    to: playing
  action:
  - data:
      entity_id: switch.strip_cord
    service: switch.turn_on
  - data:
      entity_id: script.tv_from_standby
    service: script.turn_on
- id: jonas-came-home
  trigger:
  - entity_id: device_tracker.jonassamsung
    platform: state
    from: not_home
    to: home
    for:
      hours: 0
      minutes: 10
      seconds: 0
  action:
  - data:
      message: Jonas is Back Home!
    service: notify.notify
  alias: Jonas Is Home
- id: jonas-left-home
  trigger:
  - entity_id: device_tracker.jonassamsung
    for:
      hours: 0
      minutes: 10
      seconds: 0
    from: home
    platform: state
    to: not_home
  action:
  - data:
      message: Jonas Left Home
    service: notify.notify
  alias: Jonas Left Home


- id: cast_mpd_to_omc
  alias: Cast to OMC when playing from MPD
  trigger:
    platform: state
    entity_id: media_player.mpd_kali
    to: 'playing'
  action:
    - service: script.turn_on
      entity_id: script.stream_icecast_to_omc
